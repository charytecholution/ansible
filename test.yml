---
  - name: Screenings_Skill_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/skill-server
      container_name: dockercompose_skill-server_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 8082:8082 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}
        
  - name: Screenings_Position_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/position-server
      container_name: dockercompose_position-server_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 8083:8083 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}

  - name: Screenings_Interview_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/interview-server
      container_name: dockercompose_interview-server_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 8081:8081 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}

  - name: Screenings_Gateway_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/gateway-server
      container_name: dockercompose_gateway_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 80:8080 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}
        
  - name: Screenings_Assessment_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/assessment-server
      container_name: dockercompose_assessment-server_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 8084:8084 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}

  - name: Screenings_Candidate_Container
    hosts: app_servers
    gather_facts: False
    remote_user: ubuntu
    vars:
      base_image: nexus.techolution.com:8123/screenings/candidate-server
      container_name: dockercompose_candidate-server_1
    tasks:
      - name: Remove the base container if it exists
        shell: docker rm -f {{ container_name }}
      - name: Start the base container
        shell: docker run -d -t -p 8085:8085 --name {{ container_name }} {{ base_image }} 
      - name: Add the container to the inventory
        add_host: name={{ container_name }}
